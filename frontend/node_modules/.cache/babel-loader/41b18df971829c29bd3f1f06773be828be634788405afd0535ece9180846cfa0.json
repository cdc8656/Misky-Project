{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\chrix\\\\OneDrive\\\\Documents\\\\Python\\\\Misky FastApi\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\n// src/App.js\nimport React, { useEffect, useState } from \"react\";\nimport { BrowserRouter as Router, Routes, Route, Navigate } from \"react-router-dom\";\nimport { createClient } from \"@supabase/supabase-js\";\nimport RestaurantDashboard from \"./components/RestaurantDashboard\";\nimport CustomerDashboard from \"./components/CustomerDashboard\";\nimport AuthForm from \"./components/AuthForm\";\nimport HomePage from \"./components/HomePage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SUPABASE_URL = process.env.REACT_APP_SUPABASE_URL;\nconst SUPABASE_ANON_KEY = process.env.REACT_APP_SUPABASE_ANON_KEY;\nconst supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);\nexport default function App() {\n  _s();\n  const [user, setUser] = useState(null);\n  const [profile, setProfile] = useState(null);\n  useEffect(() => {\n    async function fetchSession() {\n      var _session$user;\n      const {\n        data: {\n          session\n        }\n      } = await supabase.auth.getSession();\n      setUser((_session$user = session === null || session === void 0 ? void 0 : session.user) !== null && _session$user !== void 0 ? _session$user : null);\n    }\n    fetchSession();\n    const {\n      data: listener\n    } = supabase.auth.onAuthStateChange((_event, session) => {\n      var _session$user2;\n      setUser((_session$user2 = session === null || session === void 0 ? void 0 : session.user) !== null && _session$user2 !== void 0 ? _session$user2 : null);\n      setProfile(null);\n    });\n    return () => {\n      listener.subscription.unsubscribe();\n    };\n  }, []);\n  useEffect(() => {\n    async function fetchProfile() {\n      if (!user) {\n        setProfile(null);\n        return;\n      }\n      const {\n        data,\n        error\n      } = await supabase.from(\"profiles\").select(\"role, name, location, contact\").eq(\"user_id\", user.id).single();\n      if (error) {\n        console.error(\"Error fetching profile\", error);\n        setProfile(null);\n      } else {\n        setProfile(data);\n      }\n    }\n    fetchProfile();\n  }, [user]);\n  const handleLogout = async () => {\n    await supabase.auth.signOut();\n    setUser(null);\n    setProfile(null);\n  };\n  const handleAuth = async () => {\n    var _session$user3;\n    const {\n      data: {\n        session\n      }\n    } = await supabase.auth.getSession();\n    setUser((_session$user3 = session === null || session === void 0 ? void 0 : session.user) !== null && _session$user3 !== void 0 ? _session$user3 : null);\n  };\n  return /*#__PURE__*/_jsxDEV(Router, {\n    children: [/*#__PURE__*/_jsxDEV(Routes, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/\",\n        element: /*#__PURE__*/_jsxDEV(HomePage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 34\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/login\",\n        element: user ? /*#__PURE__*/_jsxDEV(Navigate, {\n          to: \"/dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(AuthForm, {\n          type: \"login\",\n          supabase: supabase,\n          onAuth: handleAuth\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/register\",\n        element: user ? /*#__PURE__*/_jsxDEV(Navigate, {\n          to: \"/dashboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(AuthForm, {\n          type: \"register\",\n          supabase: supabase,\n          onAuth: handleAuth\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/dashboard\",\n        element: user && profile ? profile.role === \"restaurant\" ? /*#__PURE__*/_jsxDEV(RestaurantDashboard, {\n          user: user,\n          profile: profile,\n          supabase: supabase\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 17\n        }, this) : /*#__PURE__*/_jsxDEV(CustomerDashboard, {\n          user: user,\n          profile: profile,\n          supabase: supabase\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 17\n        }, this) : user ? /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            textAlign: \"center\",\n            marginTop: \"2rem\"\n          },\n          children: \"Loading profile...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(Navigate, {\n          to: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"*\",\n        element: /*#__PURE__*/_jsxDEV(Navigate, {\n          to: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 34\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), user && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"fixed\",\n        top: 10,\n        right: 20\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleLogout,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"ZvEXHppJ4xjVEPJ1Gxp5j4H1SJw=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","BrowserRouter","Router","Routes","Route","Navigate","createClient","RestaurantDashboard","CustomerDashboard","AuthForm","HomePage","jsxDEV","_jsxDEV","SUPABASE_URL","process","env","REACT_APP_SUPABASE_URL","SUPABASE_ANON_KEY","REACT_APP_SUPABASE_ANON_KEY","supabase","App","_s","user","setUser","profile","setProfile","fetchSession","_session$user","data","session","auth","getSession","listener","onAuthStateChange","_event","_session$user2","subscription","unsubscribe","fetchProfile","error","from","select","eq","id","single","console","handleLogout","signOut","handleAuth","_session$user3","children","path","element","fileName","_jsxFileName","lineNumber","columnNumber","to","type","onAuth","role","style","textAlign","marginTop","position","top","right","onClick","_c","$RefreshReg$"],"sources":["C:/Users/chrix/OneDrive/Documents/Python/Misky FastApi/frontend/src/App.js"],"sourcesContent":["// src/App.js\nimport React, { useEffect, useState } from \"react\";\nimport { BrowserRouter as Router, Routes, Route, Navigate } from \"react-router-dom\";\nimport { createClient } from \"@supabase/supabase-js\";\n\nimport RestaurantDashboard from \"./components/RestaurantDashboard\";\nimport CustomerDashboard from \"./components/CustomerDashboard\";\nimport AuthForm from \"./components/AuthForm\";\nimport HomePage from \"./components/HomePage\";\n\nconst SUPABASE_URL = process.env.REACT_APP_SUPABASE_URL;\nconst SUPABASE_ANON_KEY = process.env.REACT_APP_SUPABASE_ANON_KEY;\n\nconst supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);\n\nexport default function App() {\n  const [user, setUser] = useState(null);\n  const [profile, setProfile] = useState(null);\n\n  useEffect(() => {\n    async function fetchSession() {\n      const {\n        data: { session },\n      } = await supabase.auth.getSession();\n      setUser(session?.user ?? null);\n    }\n    fetchSession();\n\n    const { data: listener } = supabase.auth.onAuthStateChange((_event, session) => {\n      setUser(session?.user ?? null);\n      setProfile(null);\n    });\n\n    return () => {\n      listener.subscription.unsubscribe();\n    };\n  }, []);\n\n  useEffect(() => {\n    async function fetchProfile() {\n      if (!user) {\n        setProfile(null);\n        return;\n      }\n      const { data, error } = await supabase\n        .from(\"profiles\")\n        .select(\"role, name, location, contact\")\n        .eq(\"user_id\", user.id)\n        .single();\n\n      if (error) {\n        console.error(\"Error fetching profile\", error);\n        setProfile(null);\n      } else {\n        setProfile(data);\n      }\n    }\n    fetchProfile();\n  }, [user]);\n\n  const handleLogout = async () => {\n    await supabase.auth.signOut();\n    setUser(null);\n    setProfile(null);\n  };\n\n  const handleAuth = async () => {\n    const {\n      data: { session },\n    } = await supabase.auth.getSession();\n    setUser(session?.user ?? null);\n  };\n\n  return (\n    <Router>\n      <Routes>\n        <Route path=\"/\" element={<HomePage />} />\n\n        <Route\n          path=\"/login\"\n          element={\n            user ? (\n              <Navigate to=\"/dashboard\" />\n            ) : (\n              <AuthForm type=\"login\" supabase={supabase} onAuth={handleAuth} />\n            )\n          }\n        />\n\n        <Route\n          path=\"/register\"\n          element={\n            user ? (\n              <Navigate to=\"/dashboard\" />\n            ) : (\n              <AuthForm type=\"register\" supabase={supabase} onAuth={handleAuth} />\n            )\n          }\n        />\n\n        <Route\n          path=\"/dashboard\"\n          element={\n            user && profile ? (\n              profile.role === \"restaurant\" ? (\n                <RestaurantDashboard user={user} profile={profile} supabase={supabase} />\n              ) : (\n                <CustomerDashboard user={user} profile={profile} supabase={supabase} />\n              )\n            ) : user ? (\n              <p style={{ textAlign: \"center\", marginTop: \"2rem\" }}>Loading profile...</p>\n            ) : (\n              <Navigate to=\"/\" />\n            )\n          }\n        />\n\n        <Route path=\"*\" element={<Navigate to=\"/\" />} />\n      </Routes>\n\n      {user && (\n        <div style={{ position: \"fixed\", top: 10, right: 20 }}>\n          <button onClick={handleLogout}>Logout</button>\n        </div>\n      )}\n    </Router>\n  );\n}\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,aAAa,IAAIC,MAAM,EAAEC,MAAM,EAAEC,KAAK,EAAEC,QAAQ,QAAQ,kBAAkB;AACnF,SAASC,YAAY,QAAQ,uBAAuB;AAEpD,OAAOC,mBAAmB,MAAM,kCAAkC;AAClE,OAAOC,iBAAiB,MAAM,gCAAgC;AAC9D,OAAOC,QAAQ,MAAM,uBAAuB;AAC5C,OAAOC,QAAQ,MAAM,uBAAuB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE7C,MAAMC,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACC,sBAAsB;AACvD,MAAMC,iBAAiB,GAAGH,OAAO,CAACC,GAAG,CAACG,2BAA2B;AAEjE,MAAMC,QAAQ,GAAGb,YAAY,CAACO,YAAY,EAAEI,iBAAiB,CAAC;AAE9D,eAAe,SAASG,GAAGA,CAAA,EAAG;EAAAC,EAAA;EAC5B,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGvB,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACwB,OAAO,EAAEC,UAAU,CAAC,GAAGzB,QAAQ,CAAC,IAAI,CAAC;EAE5CD,SAAS,CAAC,MAAM;IACd,eAAe2B,YAAYA,CAAA,EAAG;MAAA,IAAAC,aAAA;MAC5B,MAAM;QACJC,IAAI,EAAE;UAAEC;QAAQ;MAClB,CAAC,GAAG,MAAMV,QAAQ,CAACW,IAAI,CAACC,UAAU,CAAC,CAAC;MACpCR,OAAO,EAAAI,aAAA,GAACE,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEP,IAAI,cAAAK,aAAA,cAAAA,aAAA,GAAI,IAAI,CAAC;IAChC;IACAD,YAAY,CAAC,CAAC;IAEd,MAAM;MAAEE,IAAI,EAAEI;IAAS,CAAC,GAAGb,QAAQ,CAACW,IAAI,CAACG,iBAAiB,CAAC,CAACC,MAAM,EAAEL,OAAO,KAAK;MAAA,IAAAM,cAAA;MAC9EZ,OAAO,EAAAY,cAAA,GAACN,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEP,IAAI,cAAAa,cAAA,cAAAA,cAAA,GAAI,IAAI,CAAC;MAC9BV,UAAU,CAAC,IAAI,CAAC;IAClB,CAAC,CAAC;IAEF,OAAO,MAAM;MACXO,QAAQ,CAACI,YAAY,CAACC,WAAW,CAAC,CAAC;IACrC,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAENtC,SAAS,CAAC,MAAM;IACd,eAAeuC,YAAYA,CAAA,EAAG;MAC5B,IAAI,CAAChB,IAAI,EAAE;QACTG,UAAU,CAAC,IAAI,CAAC;QAChB;MACF;MACA,MAAM;QAAEG,IAAI;QAAEW;MAAM,CAAC,GAAG,MAAMpB,QAAQ,CACnCqB,IAAI,CAAC,UAAU,CAAC,CAChBC,MAAM,CAAC,+BAA+B,CAAC,CACvCC,EAAE,CAAC,SAAS,EAAEpB,IAAI,CAACqB,EAAE,CAAC,CACtBC,MAAM,CAAC,CAAC;MAEX,IAAIL,KAAK,EAAE;QACTM,OAAO,CAACN,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;QAC9Cd,UAAU,CAAC,IAAI,CAAC;MAClB,CAAC,MAAM;QACLA,UAAU,CAACG,IAAI,CAAC;MAClB;IACF;IACAU,YAAY,CAAC,CAAC;EAChB,CAAC,EAAE,CAAChB,IAAI,CAAC,CAAC;EAEV,MAAMwB,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,MAAM3B,QAAQ,CAACW,IAAI,CAACiB,OAAO,CAAC,CAAC;IAC7BxB,OAAO,CAAC,IAAI,CAAC;IACbE,UAAU,CAAC,IAAI,CAAC;EAClB,CAAC;EAED,MAAMuB,UAAU,GAAG,MAAAA,CAAA,KAAY;IAAA,IAAAC,cAAA;IAC7B,MAAM;MACJrB,IAAI,EAAE;QAAEC;MAAQ;IAClB,CAAC,GAAG,MAAMV,QAAQ,CAACW,IAAI,CAACC,UAAU,CAAC,CAAC;IACpCR,OAAO,EAAA0B,cAAA,GAACpB,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEP,IAAI,cAAA2B,cAAA,cAAAA,cAAA,GAAI,IAAI,CAAC;EAChC,CAAC;EAED,oBACErC,OAAA,CAACV,MAAM;IAAAgD,QAAA,gBACLtC,OAAA,CAACT,MAAM;MAAA+C,QAAA,gBACLtC,OAAA,CAACR,KAAK;QAAC+C,IAAI,EAAC,GAAG;QAACC,OAAO,eAAExC,OAAA,CAACF,QAAQ;UAAA2C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAE;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eAEzC5C,OAAA,CAACR,KAAK;QACJ+C,IAAI,EAAC,QAAQ;QACbC,OAAO,EACL9B,IAAI,gBACFV,OAAA,CAACP,QAAQ;UAACoD,EAAE,EAAC;QAAY;UAAAJ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,gBAE5B5C,OAAA,CAACH,QAAQ;UAACiD,IAAI,EAAC,OAAO;UAACvC,QAAQ,EAAEA,QAAS;UAACwC,MAAM,EAAEX;QAAW;UAAAK,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAEnE;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC,eAEF5C,OAAA,CAACR,KAAK;QACJ+C,IAAI,EAAC,WAAW;QAChBC,OAAO,EACL9B,IAAI,gBACFV,OAAA,CAACP,QAAQ;UAACoD,EAAE,EAAC;QAAY;UAAAJ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,gBAE5B5C,OAAA,CAACH,QAAQ;UAACiD,IAAI,EAAC,UAAU;UAACvC,QAAQ,EAAEA,QAAS;UAACwC,MAAM,EAAEX;QAAW;UAAAK,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAEtE;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC,eAEF5C,OAAA,CAACR,KAAK;QACJ+C,IAAI,EAAC,YAAY;QACjBC,OAAO,EACL9B,IAAI,IAAIE,OAAO,GACbA,OAAO,CAACoC,IAAI,KAAK,YAAY,gBAC3BhD,OAAA,CAACL,mBAAmB;UAACe,IAAI,EAAEA,IAAK;UAACE,OAAO,EAAEA,OAAQ;UAACL,QAAQ,EAAEA;QAAS;UAAAkC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,gBAEzE5C,OAAA,CAACJ,iBAAiB;UAACc,IAAI,EAAEA,IAAK;UAACE,OAAO,EAAEA,OAAQ;UAACL,QAAQ,EAAEA;QAAS;UAAAkC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CACvE,GACClC,IAAI,gBACNV,OAAA;UAAGiD,KAAK,EAAE;YAAEC,SAAS,EAAE,QAAQ;YAAEC,SAAS,EAAE;UAAO,CAAE;UAAAb,QAAA,EAAC;QAAkB;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,gBAE5E5C,OAAA,CAACP,QAAQ;UAACoD,EAAE,EAAC;QAAG;UAAAJ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAErB;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC,eAEF5C,OAAA,CAACR,KAAK;QAAC+C,IAAI,EAAC,GAAG;QAACC,OAAO,eAAExC,OAAA,CAACP,QAAQ;UAACoD,EAAE,EAAC;QAAG;UAAAJ,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAE;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC1C,CAAC,EAERlC,IAAI,iBACHV,OAAA;MAAKiD,KAAK,EAAE;QAAEG,QAAQ,EAAE,OAAO;QAAEC,GAAG,EAAE,EAAE;QAAEC,KAAK,EAAE;MAAG,CAAE;MAAAhB,QAAA,eACpDtC,OAAA;QAAQuD,OAAO,EAAErB,YAAa;QAAAI,QAAA,EAAC;MAAM;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC3C,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACK,CAAC;AAEb;AAACnC,EAAA,CAhHuBD,GAAG;AAAAgD,EAAA,GAAHhD,GAAG;AAAA,IAAAgD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}